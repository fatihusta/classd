#!/bin/dash



load_defaults()
{
    SPLITD_ONLINE_FILE="/etc/untangle-splitd/online.js"
    
    if [ -f /etc/default/untangle-splitd ] ; then
        . /etc/default/untangle-splitd
    fi
}

update_is_online()
{
    mkdir -p `dirname ${SPLITD_ONLINE_FILE}`

    ## This is the definition of filthy
    cat<<EOF >${SPLITD_ONLINE_FILE}
{
    "is_online" : [ 
    ${FAILD_UPLINK_1_ONLINE:-false}, 
    ${FAILD_UPLINK_2_ONLINE:-false}, 
    ${FAILD_UPLINK_3_ONLINE:-false}, 
    ${FAILD_UPLINK_4_ONLINE:-false}, 
    ${FAILD_UPLINK_5_ONLINE:-false}, 
    ${FAILD_UPLINK_6_ONLINE:-false}, 
    ${FAILD_UPLINK_7_ONLINE:-false}, 
    ${FAILD_UPLINK_8_ONLINE:-false},
    ${FAILD_UPLINK_9_ONLINE:-false},
    ${FAILD_UPLINK_10_ONLINE:-false},
    ${FAILD_UPLINK_11_ONLINE:-false},
    ${FAILD_UPLINK_12_ONLINE:-false},
    ${FAILD_UPLINK_13_ONLINE:-false},
    ${FAILD_UPLINK_14_ONLINE:-false},
    ${FAILD_UPLINK_15_ONLINE:-false},
    ${FAILD_UPLINK_16_ONLINE:-false},
    ${FAILD_UPLINK_17_ONLINE:-false},
    ${FAILD_UPLINK_18_ONLINE:-false},
    ${FAILD_UPLINK_19_ONLINE:-false},
    ${FAILD_UPLINK_20_ONLINE:-false},
    ${FAILD_UPLINK_21_ONLINE:-false},
    ${FAILD_UPLINK_22_ONLINE:-false},
    ${FAILD_UPLINK_23_ONLINE:-false},
    ${FAILD_UPLINK_24_ONLINE:-false},
    ${FAILD_UPLINK_25_ONLINE:-false},
    ${FAILD_UPLINK_26_ONLINE:-false},
    ${FAILD_UPLINK_27_ONLINE:-false},
    ${FAILD_UPLINK_28_ONLINE:-false},
    ${FAILD_UPLINK_29_ONLINE:-false},
    ${FAILD_UPLINK_30_ONLINE:-false},
    ${FAILD_UPLINK_31_ONLINE:-false},
    ${FAILD_UPLINK_32_ONLINE:-false},
    ${FAILD_UPLINK_33_ONLINE:-false},
    ${FAILD_UPLINK_34_ONLINE:-false},
    ${FAILD_UPLINK_35_ONLINE:-false},
    ${FAILD_UPLINK_36_ONLINE:-false},
    ${FAILD_UPLINK_37_ONLINE:-false},
    ${FAILD_UPLINK_38_ONLINE:-false},
    ${FAILD_UPLINK_39_ONLINE:-false},
    ${FAILD_UPLINK_40_ONLINE:-false},
    ${FAILD_UPLINK_41_ONLINE:-false},
    ${FAILD_UPLINK_42_ONLINE:-false},
    ${FAILD_UPLINK_43_ONLINE:-false},
    ${FAILD_UPLINK_44_ONLINE:-false},
    ${FAILD_UPLINK_45_ONLINE:-false},
    ${FAILD_UPLINK_46_ONLINE:-false},
    ${FAILD_UPLINK_47_ONLINE:-false},
    ${FAILD_UPLINK_48_ONLINE:-false},
    ${FAILD_UPLINK_49_ONLINE:-false},
    ${FAILD_UPLINK_50_ONLINE:-false},
    ${FAILD_UPLINK_51_ONLINE:-false},
    ${FAILD_UPLINK_52_ONLINE:-false},
    ${FAILD_UPLINK_53_ONLINE:-false},
    ${FAILD_UPLINK_54_ONLINE:-false},
    ${FAILD_UPLINK_55_ONLINE:-false},
    ${FAILD_UPLINK_56_ONLINE:-false},
    ${FAILD_UPLINK_57_ONLINE:-false},
    ${FAILD_UPLINK_58_ONLINE:-false},
    ${FAILD_UPLINK_59_ONLINE:-false},
    ${FAILD_UPLINK_60_ONLINE:-false},
    ${FAILD_UPLINK_61_ONLINE:-false},
    ${FAILD_UPLINK_62_ONLINE:-false},
    ${FAILD_UPLINK_63_ONLINE:-false},
    ${FAILD_UPLINK_64_ONLINE:-false},
    ${FAILD_UPLINK_65_ONLINE:-false},
    ${FAILD_UPLINK_66_ONLINE:-false},
    ${FAILD_UPLINK_67_ONLINE:-false},
    ${FAILD_UPLINK_68_ONLINE:-false},
    ${FAILD_UPLINK_69_ONLINE:-false},
    ${FAILD_UPLINK_70_ONLINE:-false},
    ${FAILD_UPLINK_71_ONLINE:-false},
    ${FAILD_UPLINK_72_ONLINE:-false},
    ${FAILD_UPLINK_73_ONLINE:-false},
    ${FAILD_UPLINK_74_ONLINE:-false},
    ${FAILD_UPLINK_75_ONLINE:-false},
    ${FAILD_UPLINK_76_ONLINE:-false},
    ${FAILD_UPLINK_77_ONLINE:-false},
    ${FAILD_UPLINK_78_ONLINE:-false},
    ${FAILD_UPLINK_79_ONLINE:-false},
    ${FAILD_UPLINK_80_ONLINE:-false},
    ${FAILD_UPLINK_81_ONLINE:-false},
    ${FAILD_UPLINK_82_ONLINE:-false},
    ${FAILD_UPLINK_83_ONLINE:-false},
    ${FAILD_UPLINK_84_ONLINE:-false},
    ${FAILD_UPLINK_85_ONLINE:-false},
    ${FAILD_UPLINK_86_ONLINE:-false},
    ${FAILD_UPLINK_87_ONLINE:-false},
    ${FAILD_UPLINK_88_ONLINE:-false},
    ${FAILD_UPLINK_89_ONLINE:-false},
    ${FAILD_UPLINK_90_ONLINE:-false},
    ${FAILD_UPLINK_91_ONLINE:-false},
    ${FAILD_UPLINK_92_ONLINE:-false},
    ${FAILD_UPLINK_93_ONLINE:-false},
    ${FAILD_UPLINK_94_ONLINE:-false},
    ${FAILD_UPLINK_95_ONLINE:-false},
    ${FAILD_UPLINK_96_ONLINE:-false},
    ${FAILD_UPLINK_97_ONLINE:-false},
    ${FAILD_UPLINK_98_ONLINE:-false},
    ${FAILD_UPLINK_99_ONLINE:-false},
    ${FAILD_UPLINK_100_ONLINE:-false},
    ${FAILD_UPLINK_101_ONLINE:-false},
    ${FAILD_UPLINK_102_ONLINE:-false},
    ${FAILD_UPLINK_103_ONLINE:-false},
    ${FAILD_UPLINK_104_ONLINE:-false},
    ${FAILD_UPLINK_105_ONLINE:-false},
    ${FAILD_UPLINK_106_ONLINE:-false},
    ${FAILD_UPLINK_107_ONLINE:-false},
    ${FAILD_UPLINK_108_ONLINE:-false},
    ${FAILD_UPLINK_109_ONLINE:-false},
    ${FAILD_UPLINK_110_ONLINE:-false},
    ${FAILD_UPLINK_111_ONLINE:-false},
    ${FAILD_UPLINK_112_ONLINE:-false},
    ${FAILD_UPLINK_113_ONLINE:-false},
    ${FAILD_UPLINK_114_ONLINE:-false},
    ${FAILD_UPLINK_115_ONLINE:-false},
    ${FAILD_UPLINK_116_ONLINE:-false},
    ${FAILD_UPLINK_117_ONLINE:-false},
    ${FAILD_UPLINK_118_ONLINE:-false},
    ${FAILD_UPLINK_119_ONLINE:-false},
    ${FAILD_UPLINK_120_ONLINE:-false},
    ${FAILD_UPLINK_121_ONLINE:-false},
    ${FAILD_UPLINK_122_ONLINE:-false},
    ${FAILD_UPLINK_123_ONLINE:-false},
    ${FAILD_UPLINK_124_ONLINE:-false},
    ${FAILD_UPLINK_125_ONLINE:-false},
    ${FAILD_UPLINK_126_ONLINE:-false},
    ${FAILD_UPLINK_127_ONLINE:-false},
    ${FAILD_UPLINK_128_ONLINE:-false},
    ${FAILD_UPLINK_129_ONLINE:-false},
    ${FAILD_UPLINK_130_ONLINE:-false},
    ${FAILD_UPLINK_131_ONLINE:-false},
    ${FAILD_UPLINK_132_ONLINE:-false},
    ${FAILD_UPLINK_133_ONLINE:-false},
    ${FAILD_UPLINK_134_ONLINE:-false},
    ${FAILD_UPLINK_135_ONLINE:-false},
    ${FAILD_UPLINK_136_ONLINE:-false},
    ${FAILD_UPLINK_137_ONLINE:-false},
    ${FAILD_UPLINK_138_ONLINE:-false},
    ${FAILD_UPLINK_139_ONLINE:-false},
    ${FAILD_UPLINK_140_ONLINE:-false},
    ${FAILD_UPLINK_141_ONLINE:-false},
    ${FAILD_UPLINK_142_ONLINE:-false},
    ${FAILD_UPLINK_143_ONLINE:-false},
    ${FAILD_UPLINK_144_ONLINE:-false},
    ${FAILD_UPLINK_145_ONLINE:-false},
    ${FAILD_UPLINK_146_ONLINE:-false},
    ${FAILD_UPLINK_147_ONLINE:-false},
    ${FAILD_UPLINK_148_ONLINE:-false},
    ${FAILD_UPLINK_149_ONLINE:-false},
    ${FAILD_UPLINK_150_ONLINE:-false},
    ${FAILD_UPLINK_151_ONLINE:-false},
    ${FAILD_UPLINK_152_ONLINE:-false},
    ${FAILD_UPLINK_153_ONLINE:-false},
    ${FAILD_UPLINK_154_ONLINE:-false},
    ${FAILD_UPLINK_155_ONLINE:-false},
    ${FAILD_UPLINK_156_ONLINE:-false},
    ${FAILD_UPLINK_157_ONLINE:-false},
    ${FAILD_UPLINK_158_ONLINE:-false},
    ${FAILD_UPLINK_159_ONLINE:-false},
    ${FAILD_UPLINK_160_ONLINE:-false},
    ${FAILD_UPLINK_161_ONLINE:-false},
    ${FAILD_UPLINK_162_ONLINE:-false},
    ${FAILD_UPLINK_163_ONLINE:-false},
    ${FAILD_UPLINK_164_ONLINE:-false},
    ${FAILD_UPLINK_165_ONLINE:-false},
    ${FAILD_UPLINK_166_ONLINE:-false},
    ${FAILD_UPLINK_167_ONLINE:-false},
    ${FAILD_UPLINK_168_ONLINE:-false},
    ${FAILD_UPLINK_169_ONLINE:-false},
    ${FAILD_UPLINK_170_ONLINE:-false},
    ${FAILD_UPLINK_171_ONLINE:-false},
    ${FAILD_UPLINK_172_ONLINE:-false},
    ${FAILD_UPLINK_173_ONLINE:-false},
    ${FAILD_UPLINK_174_ONLINE:-false},
    ${FAILD_UPLINK_175_ONLINE:-false},
    ${FAILD_UPLINK_176_ONLINE:-false},
    ${FAILD_UPLINK_177_ONLINE:-false},
    ${FAILD_UPLINK_178_ONLINE:-false},
    ${FAILD_UPLINK_179_ONLINE:-false},
    ${FAILD_UPLINK_180_ONLINE:-false},
    ${FAILD_UPLINK_181_ONLINE:-false},
    ${FAILD_UPLINK_182_ONLINE:-false},
    ${FAILD_UPLINK_183_ONLINE:-false},
    ${FAILD_UPLINK_184_ONLINE:-false},
    ${FAILD_UPLINK_185_ONLINE:-false},
    ${FAILD_UPLINK_186_ONLINE:-false},
    ${FAILD_UPLINK_187_ONLINE:-false},
    ${FAILD_UPLINK_188_ONLINE:-false},
    ${FAILD_UPLINK_189_ONLINE:-false},
    ${FAILD_UPLINK_190_ONLINE:-false},
    ${FAILD_UPLINK_191_ONLINE:-false},
    ${FAILD_UPLINK_192_ONLINE:-false},
    ${FAILD_UPLINK_193_ONLINE:-false},
    ${FAILD_UPLINK_194_ONLINE:-false},
    ${FAILD_UPLINK_195_ONLINE:-false},
    ${FAILD_UPLINK_196_ONLINE:-false},
    ${FAILD_UPLINK_197_ONLINE:-false},
    ${FAILD_UPLINK_198_ONLINE:-false},
    ${FAILD_UPLINK_199_ONLINE:-false},
    ${FAILD_UPLINK_200_ONLINE:-false},
    ${FAILD_UPLINK_201_ONLINE:-false},
    ${FAILD_UPLINK_202_ONLINE:-false},
    ${FAILD_UPLINK_203_ONLINE:-false},
    ${FAILD_UPLINK_204_ONLINE:-false},
    ${FAILD_UPLINK_205_ONLINE:-false},
    ${FAILD_UPLINK_206_ONLINE:-false},
    ${FAILD_UPLINK_207_ONLINE:-false},
    ${FAILD_UPLINK_208_ONLINE:-false},
    ${FAILD_UPLINK_209_ONLINE:-false},
    ${FAILD_UPLINK_210_ONLINE:-false},
    ${FAILD_UPLINK_211_ONLINE:-false},
    ${FAILD_UPLINK_212_ONLINE:-false},
    ${FAILD_UPLINK_213_ONLINE:-false},
    ${FAILD_UPLINK_214_ONLINE:-false},
    ${FAILD_UPLINK_215_ONLINE:-false},
    ${FAILD_UPLINK_216_ONLINE:-false},
    ${FAILD_UPLINK_217_ONLINE:-false},
    ${FAILD_UPLINK_218_ONLINE:-false},
    ${FAILD_UPLINK_219_ONLINE:-false},
    ${FAILD_UPLINK_220_ONLINE:-false},
    ${FAILD_UPLINK_221_ONLINE:-false},
    ${FAILD_UPLINK_222_ONLINE:-false},
    ${FAILD_UPLINK_223_ONLINE:-false},
    ${FAILD_UPLINK_224_ONLINE:-false},
    ${FAILD_UPLINK_225_ONLINE:-false},
    ${FAILD_UPLINK_226_ONLINE:-false},
    ${FAILD_UPLINK_227_ONLINE:-false},
    ${FAILD_UPLINK_228_ONLINE:-false},
    ${FAILD_UPLINK_229_ONLINE:-false},
    ${FAILD_UPLINK_230_ONLINE:-false},
    ${FAILD_UPLINK_231_ONLINE:-false},
    ${FAILD_UPLINK_232_ONLINE:-false},
    ${FAILD_UPLINK_233_ONLINE:-false},
    ${FAILD_UPLINK_234_ONLINE:-false},
    ${FAILD_UPLINK_235_ONLINE:-false},
    ${FAILD_UPLINK_236_ONLINE:-false},
    ${FAILD_UPLINK_237_ONLINE:-false},
    ${FAILD_UPLINK_238_ONLINE:-false},
    ${FAILD_UPLINK_239_ONLINE:-false},
    ${FAILD_UPLINK_240_ONLINE:-false},
    ${FAILD_UPLINK_241_ONLINE:-false},
    ${FAILD_UPLINK_242_ONLINE:-false},
    ${FAILD_UPLINK_243_ONLINE:-false},
    ${FAILD_UPLINK_244_ONLINE:-false},
    ${FAILD_UPLINK_245_ONLINE:-false},
    ${FAILD_UPLINK_246_ONLINE:-false},
    ${FAILD_UPLINK_247_ONLINE:-false},
    ${FAILD_UPLINK_248_ONLINE:-false},
    ${FAILD_UPLINK_249_ONLINE:-false},
    ${FAILD_UPLINK_250_ONLINE:-false}]
}
EOF
}

## Start of script
load_defaults

update_is_online