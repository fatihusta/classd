#!/usr/bin/python

import sys;
import subprocess;

def center(str):
    if (len(str) >= 16):
        return str;
    padding = " " * ((16 - len(str))/2)
    return padding + str + padding

def runCmd(cmd):
    proc = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
    std_out = proc.stdout.read();
    ret_code = proc.wait();
    return std_out.rstrip();




if (len(sys.argv) < 3):
    print "Usage ",sys.argv[0],": <page> <line>"
    sys.exit(1);

    proc = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
    std_out = proc.stdout.read();
 
page = int(sys.argv[1])
line = int(sys.argv[2])

#print "Page: ",page
#print "Line: ",line

if (page == 0):
    if (line == 1):
        print "*** Untangle ***"
    else:
        print center(runCmd("hostname -s"))
elif (page == 1):
    if (line == 1):
        print "*** CPU Load ***"
    else:
        cpu1f = float(runCmd('cat /proc/loadavg| awk \'{print $1}\''))
        cpuCount = float(runCmd('cat /proc/loadavg| grep processor | wc -l'))
        cpuLoadText = "low"
        if (cpu1f - cpuCount > 1.0):
            cpuLoadText = "medium"
        if (cpu1f - cpuCount > 4.0):
            cpuLoadText = "high"
        print center(cpuLoadText + " (" + str(cpu1f) + ")")
elif (page == 2):
    if (line == 1):
        print "***  Memory  ***"
    else:
        used = float(runCmd('free -m | grep \'buffers/cache\' | awk \'{print $3}\''))
        free = float(runCmd('free -m | grep \'buffers/cache\' | awk \'{print $4}\''))
        totalGigs = str(int(round((used + free)/1000))) + " Gb"
        percentFree = str(int(round((free/(used + free))*100.0))) + "%"
        print center(totalGigs + " " + percentFree + " free")

        

                       
    
